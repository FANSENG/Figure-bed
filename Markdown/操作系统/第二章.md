# 进程、线程与作业

## 多道程序设计

> - 多道程序设计是OS所采用的最基本、最重要的技术，其根本目标是提高系统的效率。衡量系统效率的一个尺度是吞吐量。
> - 吞吐量: 单位时间内系统所处理的作业的道数。
> - ![https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%90%9E%E5%90%90%E9%87%8F.png](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/吞吐量.png)

### **单道程序设计的缺点**

#### **设备资源利用率低**

> 单道程序系统中，内存中仅存在一个程序，该程序仅能用到设备集中的一个子集，未被用到的外设资源便被浪费。

#### **内存资源利用率低**

> 随着硬件技术的提高，内存容量不断增加，目前已达上百兆或几个G，而一般程序的长度远小于内存容量。若采用单道程序设计，则内存空间的浪费很大。

#### **处理机资源利用率低** 

> 中断，通道，DMA控制器的引入，使处理器与I/O设备的可以并行。 

### **多道程序设计的提出**

#### 设备资源利用率提高

> 各种设备资源都会被用到并经常处于忙碌状态，设备利用率将得到明显提高。

#### 内存资源利用率提高

> 允许多道程序同时进入系统可避免单道程序过短而内存空间很大所造成的存储空间浪费。

#### 处理机资源利用率提高

> 在单道程序系统中，处理机资源利用率低的主要原因是当运行程序等待I/O操作完成时，处理机被闲置。若将两道程序同时放入内存，在一个程序等待I/O操作期间，处理机执行另一个程序，便可提高处理机的利用率。

> 增加同时运行程序的道数可提高系统资源利用率，从而提高系统效率，但道数应与系统资源数量相当。道数过少，系统资源利用率低；道数过多，系统开销增大，程序响应速度下降。

### 多道程序设计的问题

> 多道程序设计改善了系统资源的利用率，增加了吞吐量，提高了系统效率，但同时也带来了新的问题：即资源竞争。

#### 处理机资源管理问题

> 如果**可运行程序的个数多于处理机的个数**，则需解决可运行程序与处理机资源的竞争问题，即需要对处理机资源加以管理，实现处理机资源在各个程序之间的分配和调度。

#### 内存资源管理问题

> 1. 内存划分问题
> 2. 逻辑地址映射到内存物理地址，即重定位  
> 3. 存储空间的保护

#### 设备资源管理问题

> 尽管操作系统在选择程序进入系统时可以使进入系统的程序搭配相对合理，但由于<u>程序使用资源的不确定性以及程序推进速度的不确定性</u>，内存中的多道程序在使用设备时经常发生冲突，即多个程序同时要求使用同一资源，这就要求操作系统确定适当的分配策略，并据此对资源加以管理。

## 进程的引入

> - 多道程序设计中程序的活动规律：
>     推进→暂停→推进→暂停→…
> - 程序暂停时需将现场信息作为断点保存起来。
> - 程序推进时需恢复上次暂停时的现场信息,并从断点处继续执行。

### 进程的概念[^1]

> 1. 进程是具有一定独立功能的程序关于一个数据集合的一次运行活动，可并发执行的程序在一个数据集合上的运行过程。
> 2. 进程是程序的一次执行;
> 3. 进程是可参与并发执行的程序;
> 4. 进程是一个程序与数据一道通过处理机的执行所发生的活动;
> 5. 所谓进程, 就是一个程序在给定的空间和初始环境下, 在一个处理机上的执行过程。 

### 进程状态及状态转换

#### 进程状态

##### 运行态

> 进程占有CPU，正在向前推进。单处理机系统中任一时刻只能有一个进程处于运行态。

##### 就绪态

> 进程本身具备运行条件, 但未得到CPU。
>
> **进程被创建时处于就绪态，进程创建成功，此时把该进程插入到就绪队列中 。**

##### 等待态

> - 也称**挂起态**(Suspended)、**阻塞态**、**封锁态**(Blocked)、**睡眠态**(Sleep)。
> - 进程正等待某一个事件的发生，即使给它分配处理机也不能运行。

> 运行、就绪、等待是进程的**三种最基本的状态**。对于一个具体系统来说, 为了实现某种设计目标，进程状态的数量可能多于三个。

#### 	进程状态转换

> - 就绪=>运行：获得处理机
> - 运行=>就绪：剥夺处理机
> - 运行=>等待：申请资源未得到，启动I/O传输未完成
> - 等待=>就绪：得到所申请资源，I/O传输完成
>
> 



---

[^1]:动态特性

