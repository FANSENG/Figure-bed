# 操作系统概述

- [操作系统概述](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e6%a6%82%e8%bf%b0)
  - [操作系统概念](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e6%a6%82%e5%bf%b5)
    - [操作系统定义](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e5%ae%9a%e4%b9%89)
    - [操作系统作用](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e4%bd%9c%e7%94%a8)
    - [操作系统地位](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e5%9c%b0%e4%bd%8d)
  - [操作系统的历史](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%8e%86%e5%8f%b2)
    - [操作系统的产生](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%ba%a7%e7%94%9f)
      - [**手工操作阶段**(20世纪40年代)](#%e6%89%8b%e5%b7%a5%e6%93%8d%e4%bd%9c%e9%98%b6%e6%ae%b520%e4%b8%96%e7%ba%aa40%e5%b9%b4%e4%bb%a3)
      - [**批处理阶段**（20世纪50年代）](#%e6%89%b9%e5%a4%84%e7%90%86%e9%98%b6%e6%ae%b520%e4%b8%96%e7%ba%aa50%e5%b9%b4%e4%bb%a3)
        - [**联机批处理**(I/O设备与主机相连)](#%e8%81%94%e6%9c%ba%e6%89%b9%e5%a4%84%e7%90%86io%e8%ae%be%e5%a4%87%e4%b8%8e%e4%b8%bb%e6%9c%ba%e7%9b%b8%e8%bf%9e)
        - [**脱机批处理**(I/O设备与卫星机相连)](#%e8%84%b1%e6%9c%ba%e6%89%b9%e5%a4%84%e7%90%86io%e8%ae%be%e5%a4%87%e4%b8%8e%e5%8d%ab%e6%98%9f%e6%9c%ba%e7%9b%b8%e8%bf%9e)
      - [**执行系统阶段**（Executive System 60年代初）](#%e6%89%a7%e8%a1%8c%e7%b3%bb%e7%bb%9f%e9%98%b6%e6%ae%b5executive-system-60%e5%b9%b4%e4%bb%a3%e5%88%9d)
    - [操作系统的完善](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%ae%8c%e5%96%84)
      - [**多道批处理系统**( Multi-programming System 60年代初)](#%e5%a4%9a%e9%81%93%e6%89%b9%e5%a4%84%e7%90%86%e7%b3%bb%e7%bb%9f-multi-programming-system-60%e5%b9%b4%e4%bb%a3%e5%88%9d)
      - [**分时系统** (Time-Sharing System 60年代初/中期)](#%e5%88%86%e6%97%b6%e7%b3%bb%e7%bb%9f-time-sharing-system-60%e5%b9%b4%e4%bb%a3%e5%88%9d%e4%b8%ad%e6%9c%9f)
      - [**实时系统**(Real-Time System 60年代中期)](#%e5%ae%9e%e6%97%b6%e7%b3%bb%e7%bb%9freal-time-system-60%e5%b9%b4%e4%bb%a3%e4%b8%ad%e6%9c%9f)
      - [**通用操作系统**  (60年代后期)](#%e9%80%9a%e7%94%a8%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f-60%e5%b9%b4%e4%bb%a3%e5%90%8e%e6%9c%9f)
    - [操作系统的发展](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%8f%91%e5%b1%95)
  - [操作系统的特性](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%89%b9%e6%80%a7)
    - [程序并发性](#%e7%a8%8b%e5%ba%8f%e5%b9%b6%e5%8f%91%e6%80%a7)
    - [资源共享性](#%e8%b5%84%e6%ba%90%e5%85%b1%e4%ba%ab%e6%80%a7)
    - [虚拟](#%e8%99%9a%e6%8b%9f)
    - [异步](#%e5%bc%82%e6%ad%a5)
  - [操作系统的分类](#%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%88%86%e7%b1%bb)

---

## 操作系统概念

### 操作系统定义

- 位于硬件层(HAL)之上、所有其它软件层之下的一个`系统软件`，是管理和控制计算机系统中的`硬件`以及`软件`资源、方便用户使用计算机系统的`程序集合`，能合理组织计算机工作流程，使用户能高效地利用计算机，在用户和计算机之间起到`接口`的作用。

### 操作系统作用

- 管理系统中的软硬件资源
  
  > 从资源管理的观点，OS是计算机系统资源[^1]的管理者，它负责管理和分配系统中的各种硬件和软件资源，以保证系统的各种资源得以有效利用。
  > >OS提供的管理:  
  > >
  > >- 处理机管理（进程管理）:用于分配和控制处理机。 
  > >- 存储器管理：主要负责内存的分配和回收  
  > >- I/O设备管理：负责I/O设备的分配和操纵  
  > >- 文件管理：负责文件的存取、共享和保护

[^1]:计算机提供的资源: CPU、内存、设备、文件（本质是信息，指的是数据和程序，以文件形式存在

- 为用户提供良好的界面
  
  > 命令方式、API、GUI[^2]

[^2]:GUI:Graphic User Interface

### 操作系统地位

- 硬件抽象层（HAL）之上，所有其它软件层之下

  ![https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/%E5%9C%B0%E4%BD%8D.png](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/地位.png)
  上图所示的层次关系具有穿透性：<u>高层软件可调用所有低于所在层次的软件,并可与硬件直接打交道</u>
  ![https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/%E8%B0%83%E7%94%A8%E5%9B%BE.png](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/调用图.png)

- 操作系统是配置在计算机<u>硬件上的第一层软件</u>，是对硬件系统的第一次扩充。 OS在计算机系统中占据着特殊重要的地位，其它<u>所有软件==都依赖于它==</u>的支持，它是与硬件关系<u>最密切</u>的系统软件

---

## 操作系统的历史

- **传统操作系统的三大类别:**

    >多道批处理操作系统、分时操作系统、实时操作系统。 一个实际的操作系统可能兼具三者或其中两者的功能。

    

### 操作系统的产生

#### **手工操作阶段**(20世纪40年代)

> 无操作系统，人在计算机中工作

- 作业处理步骤:
> 1.将程序和数据通过手工操作记录在穿孔纸带上
> 2.将程序纸带放到光电输入机上，再通过控制台开关启
> 3.动光电机将程序输入内存
> 4.通过控制台开关启动程序由第一条指令开始执行
> 5.运行结果在电传打印机上输出。

![](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/手工作业流程图.png)

- 手工操作缺点:
> 1.用户在其作业处理的整个过程中**独享系统的全部资源**
> 2.手工操作所需**时间很长**(人机矛盾)

#### **批处理阶段**（20世纪50年代）

> 缩短手工操作时间，使作业到作业之间的过渡摆脱人的干预, 实现自动化,提高了效率。是==**操作系统的雏形**==。

##### **联机批处理**(I/O设备与主机相连)

- 工作原理:
  > <u>操作员</u>将<u>若干作业合成一批</u>,将其卡片依次放到<u>读卡机</u>上,监督程序<u>Monitor</u>通过内存将这批作业传送到磁带机上大量作业<u>在磁带机上排队等待处理</u>。<u>输入完毕,监督程序开始处理这一批作业。</u>它自动将第一个作业读入内存,并对其进行汇编(或编译)、连接、执行、输出。第一个作业处理完立即开始处理第二个作业,如此重复,直至所有作业处理完,再处理第二批作业。

  ![https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/%E8%81%94%E6%9C%BA%E6%89%B9%E5%A4%84%E7%90%86.png](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/联机批处理.png)

- 优点:
  > 作业自动转换，大大缩短了手工操作时间
  > 出现了Monitor及相应软件的支持

- 缺点:
  
> 设备的传输速度远低于处理机的速度,I/O设备与CPU直接相连，CPU(主机)浪费(处理机利用monitor程序来处理I/O)

- 改进思想:
  
  > 把输入/输出操作交给一个功能较为单纯的卫星机去做，使主机从繁琐的输入输出操作中解脱出来

##### **脱机批处理**(I/O设备与卫星机相连)

  > 待处理的作业由卫星机负责经读卡机传送到输入磁带上，主机从输入磁带读入作业、加以处理，并把处理结果送到输出磁带上，最后由卫星机负责将输出磁带上的结果在打印机上输出

  ![https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/%E8%84%B1%E6%9C%BA%E6%89%B9%E5%A4%84%E7%90%86.png](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/脱机批处理.png)

  优点：
  > 卫星机与主机<u>分工明确</u>，**并行**工作，提高了CPU的利用率。

  缺点:
  > 单任务系统；人工拆装磁带。

#### **执行系统阶段**（Executive System 60年代初）

> 硬件的重要进展：通道、中断技术
> Monitor常驻内存，是OS的==**初级阶段**==

- 通道(channel):
  
> 也称**I/O处理机**，它<u>具有自己的指令系统和运控部件</u>，可接受处理机的委托执行通道程序，完成I/O操作。通道的I/O操作可与处理机的计算工作**完全并行**，并在<u>**I/O操作完成时向处理机发出中断请求**</u>。

- 中断(Interrupt):
  
> 中断是指当<u>主机接到某种外部信号</u>(如I/O设备完成信号)时，马上<u>暂停原来的工作，转去处理这一事件，处理完毕再回到原来的断点继续工作</u>。

![](https://raw.githubusercontent.com/FANSENG/Figure-bed/master/Picture/操作系统/执行系统阶段.png)

- 假脱机(Spooling):
  
> 作业由<u>读卡机到存储区的传输</u>以及<u>运行结果由存储区到打印机的传输</u>由**通道完成**，这种方式既**非联机**，也**非脱机**（也不是依靠卫星机），称为“**假脱机**”或“**伪脱机**”。

- 优点:
  
  > 通道取代卫星机，免去了手工装卸磁带的麻烦。

### 操作系统的完善

> 多道批处理系统和分时系统的出现标志OS已进入==**完善阶段**==

#### **多道批处理系统**( Multi-programming System 60年代初)

> 无交互能力

- 工作流程
  
> 用户提交的作业都先放在<u>外存</u>上并排成一个<u>后备队列</u>，然后由<u>作业调度程序</u>按一定的算法从后备队列中<u>选择若干个作业调入内存</u>。当<u>一道作业因等待I/O传输完成等原因暂时不能运行时，系统可将CPU资源分配给另一个可运行的作业</u>。
>
> - 只有一个作业占据CPU，其他作业等待获得CPU资源。

- 基本原理
  
> 同时把若干道程序放入内存，并使它们交替的执行。内存中同时存放几道相互独立的程序。	

- 特点
  > 1.==多道==:内存中同时存放几道相互独立的程序
  > 2.==宏观并行==:多个作业调入内存，同时占有资源各自运行，但都未完成
  > 3.==微观串行==:轮流占有处理机，交替执行

- 单道和多道比较
  > 在<u>单道批处理</u>中，当作业完成，而下一个作业还没被调入内存时，==CPU空闲==。
  > 在<u>多道批处理</u>，充分利用了CPU。本质上是同时把若干道程序放入内存，并使它们交替的执行。这样==始终使CPU处于忙状态==，要比单道批处理复杂的多。

- 优点
  
>  资源利用率高；系统吞叶量(单位时间完成作业量)大

- 缺点
  
  > 作业的平均周转时间长；无交互能力

#### **分时系统** (Time-Sharing System 60年代初/中期)

> **有交互能力**	

>  指在**一台主机**上连接了**多个**带有显示器和键盘的**终端**，同时允许多个用户共享主机中的资源，每个用户都可通过自己的终端以==**交互方式**==使用计算机。分时系统==便于程序的动态修改和调试==。

- 分时系统的特点

    > 1.**多路性**：一个主机与多个终端相连，系统按分时原则为每个用户服务。<u>**宏观上**，多个用户同时工作,==共享系统资源==；**微观上**，每个用户==轮流运行一个时间片==</u>。
    >
    > 2.**交互性**：以对话的方式为用户服务。
    >
    > 3.**独占性**：每个终端用户仿佛拥有一台虚拟机。

#### **实时系统**(Real-Time System 60年代中期)

> 指系统能<u>即时响应外部事件的请求</u>，在<u>规定时间内完成</u>对事件的处理，并<u>控制所有实时任务协调一致</u>地运行。它分为**实时信息处理系统**和**实时控制系统**两大类。

- **实时信息处理系统**由一台或多台主机通过**通信线路**连接成百上千个远程终端，计算机接收从远程终端发来的服务请求，根据用户提出的问题，对信息进行检索和处理，并**在很短时间内**为用户做出正确的**回答**。如飞机订票系统。

#### **通用操作系统**  (60年代后期)

> 将多道批处理、分时和实时等功能结合在一起构造出的多功能的操作系统，称为**通用操作系统**。

### 操作系统的发展

近30年来, OS取得了很大发展，主要表现在： 

>1.硬件体系结构由集中向分散发展，出现计算机网络，为此**网络操作系统**和**分布式操作系统**应运而生。
>
>2.微处理机的发展使家庭和商用的微型机得到了普及。为方便非计算机专业人员使用，OS提供了**友好的操作界面**。
>
>3.在科学和军事领域，大型计算任务要求极强的计算处理能力，多处理机并行成为必然，由此产生**并行操作系统**。
>
>4.随着处理机芯片和各种存储介质在各种控制领域的广泛应用，**嵌入式**和**智能卡操作系统**应运而生。为降低开发代价，尝试从不同应用中抽取具有共性的东西，并做成很小的操作系统核心，由此产生了**微内核操作系统体系结构**。

## 操作系统的特性

### 程序并发性

> - **程序并发**指计算机系统中同时存在多个程序，宏观上，这些程序同时向前推进。
>
> - > **并发**：指在计算机系统中同时存在着多道运行的程序（进程）。
>     >
>     > 宏观上：多道程序同时在执行
>     >
>     > 微观上：任何时刻只有一道程序在执行，即微观上多道程序在CPU上轮流执行（单个硬件，通过微观上快速的交替执行程序实现宏观并发）
>
> - **并行**(parallel)： 与并发相似，指多道程序在同一时刻执行，但**需==多个硬件==支持**。
> - **程序并行**要求微观上的同时,即在绝对同一时刻有多个程序同时向前推进；
> - **程序并发**并不要求微观上的同时,只需要在宏观上看来多个程序都在向前推进。
> - 在**单处理机操作系统**中，通常使用**并发**这个术语，尽管处理机与设备之间、设备与设备之间可以并行工作。
> - **并发**是操作系统==最重要的特征==，其他特征都是以并发为**前提**。

### 资源共享性

> > - **资源共享**是指操作系统<u>程序与多个用户程序</u>共用系统中的各种资源，这种<u>共享是在操作系统的控制下实现的</u>。
> > - 资源包括：「**中央处理器**」，「**内外存储器**」，「**外部设备等**」。
> > - 共享有两种形式：『**互斥共享**』和『**同时共享**』。
>
> - **互斥共享：**系统中有一些资源，当<u>一个进程正在访问该资源时，其他进程必须等待</u>，直到该进程访问完并释放这些资源时，其他进程才能访问这些资源。这就是互斥共享，互斥共享的资源叫「**临界资源**」。如：打印机等物理设备或者表格就是临界资源，它们要求互斥共享。
>
> - **同时共享：**系统中有一类资源，<u>允许在一段时间内，由多个进程同时对其访问</u>。这就是同时共享，本质还是『宏观上时同时，微观上是交替分时』的。如，磁盘，同时可以多个进程访问磁盘。
> - 「**并发**」和「**共享**」是OS的两个**最基本特征**，它们**互为存在条件**。这是因为只有进程的并发执行，才可能要求资源共享。也只有资源能够合理的实现共享，进程才能并发执行。

### 虚拟

> - 「**虚拟**」的本质含义是把物理上的一个变成逻辑上的多个。也就是把<u>一个物理实体映射为若干个对应的逻辑实体</u>——「**分时**」或「**分空间**」。
> - 如：「**多道分时技术**」能把<u>一台物理CPU虚拟为多台逻辑上的CPU</u>。还有「**虚拟存储器技术**」和「**虚拟设备技术**」。

### 异步

> - 指操作系统控制下的多个作业的**运行顺序**和每个作业的**运行时间**是**不确定**的，也就是进程在执行中，其<u>执行时间、顺序、向前推进的速度和完成的时间等都是不可预知</u>的。因此先进入内存的作业可能比后进入的作业后完成。
> - 「**并发进程中资源限制**」等原因。例如，在单处理机环境下，由于系统中只有一个处理机，因此每次只允许一个进程占有其执行，其余进程只能等待，造成异步，这样<u>先得到处理机或其他资源的进程先完成</u>。

## 操作系统的分类	

### 多道批处理系统（以脱机操作为标志）

